import datetime
import requests

# Данные из таблицы (hardcoded для Аркадия)
arkadiy_data = {
    (2025, 11): 9818, (2025, 12): 10503,
    (2026, 1): 11209, (2026, 2): 11936, (2026, 3): 12685, (2026, 4): 13457, (2026, 5): 14252, (2026, 6): 15071,
    (2026, 7): 15915, (2026, 8): 16785, (2026, 9): 17682, (2026, 10): 18606, (2026, 11): 19559, (2026, 12): 20541,
    (2027, 1): 21553, (2027, 2): 22598, (2027, 3): 23674, (2027, 4): 24785, (2027, 5): 25930, (2027, 6): 27111,
    (2027, 7): 28330, (2027, 8): 29587, (2027, 9): 30884, (2027, 10): 32222, (2027, 11): 33603, (2027, 12): 35029,
    (2028, 1): 36500, (2028, 2): 38018, (2028, 3): 39586, (2028, 4): 41205, (2028, 5): 42876, (2028, 6): 44602,
    (2028, 7): 46385, (2028, 8): 48226, (2028, 9): 50128, (2028, 10): 52094, (2028, 11): 54124, (2028, 12): 56223,
    (2029, 1): 58391, (2029, 2): 60632, (2029, 3): 62949, (2029, 4): 65344, (2029, 5): 67820, (2029, 6): 70380,
    (2029, 7): 73028, (2029, 8): 75766, (2029, 9): 78598, (2029, 10): 81527, (2029, 11): 84557, (2029, 12): 87691,
    (2030, 1): 90935, (2030, 2): 94290, (2030, 3): 97763, (2030, 4): 101357, (2030, 5): 105076, (2030, 6): 108926,
    (2030, 7): 112912, (2030, 8): 112912, (2030, 9): 112912, (2030, 10): 112912, (2030, 11): 112912, (2030, 12): 112912,
    (2031, 1): 112912, (2031, 2): 112912, (2031, 3): 112912, (2031, 4): 112912, (2031, 5): 112912, (2031, 6): 112912,
    (2031, 7): 112912, (2031, 8): 112912, (2031, 9): 112912, (2031, 10): 112912, (2031, 11): 112912, (2031, 12): 112912,
    (2032, 1): 112912, (2032, 2): 112912, (2032, 3): 112912, (2032, 4): 112912, (2032, 5): 112912, (2032, 6): 112912,
    (2032, 7): 112912, (2032, 8): 112912, (2032, 9): 112912, (2032, 10): 112912, (2032, 11): 112912, (2032, 12): 112912,
    (2033, 1): 112912, (2033, 2): 112912, (2033, 3): 112912, (2033, 4): 112912, (2033, 5): 112912, (2033, 6): 112912,
    (2033, 7): 112912, (2033, 8): 112912, (2033, 9): 112912, (2033, 10): 112912, (2033, 11): 112912, (2033, 12): 112912,
    (2034, 1): 112912, (2034, 2): 112912, (2034, 3): 112912, (2034, 4): 112912, (2034, 5): 112912, (2034, 6): 112912,
    (2034, 7): 112912, (2034, 8): 112912, (2034, 9): 112912, (2034, 10): 112912, (2034, 11): 112912, (2034, 12): 112912,
    (2035, 1): 112912, (2035, 2): 112912, (2035, 3): 112912, (2035, 4): 112912, (2035, 5): 112912, (2035, 6): 112912,
    (2035, 7): 112912, (2035, 8): 112912, (2035, 9): 112912, (2035, 10): 112912, (2035, 11): 112912, (2035, 12): 112912
}

# Данные для Марты
marta_data = {
    (2025, 11): 5733, (2025, 12): 6160,
    (2026, 1): 6592, (2026, 2): 7030, (2026, 3): 7473, (2026, 4): 7922, (2026, 5): 8377, (2026, 6): 8838,
    (2026, 7): 9304, (2026, 8): 9777, (2026, 9): 10256, (2026, 10): 10741, (2026, 11): 11232, (2026, 12): 11730,
    (2027, 1): 12234, (2027, 2): 12744, (2027, 3): 13261, (2027, 4): 13785, (2027, 5): 14315, (2027, 6): 14852,
    (2027, 7): 15395, (2027, 8): 15945, (2027, 9): 16502, (2027, 10): 17066, (2027, 11): 17636, (2027, 12): 18214,
    (2028, 1): 18798, (2028, 2): 19389, (2028, 3): 19987, (2028, 4): 20592, (2028, 5): 21204, (2028, 6): 21823,
    (2028, 7): 22449, (2028, 8): 23082, (2028, 9): 23723, (2028, 10): 24370, (2028, 11): 25025, (2028, 12): 25687,
    (2029, 1): 26356, (2029, 2): 27033, (2029, 3): 27717, (2029, 4): 28408, (2029, 5): 29107, (2029, 6): 29813,
    (2029, 7): 30527, (2029, 8): 31249, (2029, 9): 31978, (2029, 10): 32715, (2029, 11): 33460, (2029, 12): 34213,
    (2030, 1): 34974, (2030, 2): 35743, (2030, 3): 36520, (2030, 4): 37305, (2030, 5): 38100, (2030, 6): 38902,
    (2030, 7): 39712, (2030, 8): 40531, (2030, 9): 41358, (2030, 10): 42194, (2030, 11): 43038, (2030, 12): 43891,
    (2031, 1): 44753, (2031, 2): 45623, (2031, 3): 46502, (2031, 4): 47390, (2031, 5): 48287, (2031, 6): 49193,
    (2031, 7): 50108, (2031, 8): 51032, (2031, 9): 51965, (2031, 10): 52907, (2031, 11): 53858, (2031, 12): 54819,
    (2032, 1): 55789, (2032, 2): 56768, (2032, 3): 57757, (2032, 4): 58755, (2032, 5): 59763, (2032, 6): 60781,
    (2032, 7): 61808, (2032, 8): 62845, (2032, 9): 63892, (2032, 10): 64949, (2032, 11): 66016, (2032, 12): 67093,
    (2033, 1): 68180, (2033, 2): 69277, (2033, 3): 70385, (2033, 4): 71503, (2033, 5): 72631, (2033, 6): 73770,
    (2033, 7): 74919, (2033, 8): 76079, (2033, 9): 77249, (2033, 10): 78430, (2033, 11): 79622, (2033, 12): 80825,
    (2034, 1): 82038, (2034, 2): 83263, (2034, 3): 84499, (2034, 4): 85746, (2034, 5): 87004, (2034, 6): 88273,
    (2034, 7): 89554, (2034, 8): 90846, (2034, 9): 92149, (2034, 10): 93464, (2034, 11): 94790, (2034, 12): 96128,
    (2035, 1): 97478, (2035, 2): 98839, (2035, 3): 100212, (2035, 4): 100212, (2035, 5): 100212, (2035, 6): 100212,
    (2035, 7): 100212, (2035, 8): 100212, (2035, 9): 100212, (2035, 10): 100212, (2035, 11): 100212, (2035, 12): 100212
}

# Telegram bot данные
BOT_TOKEN = '8442392037:AAEiM_b4QfdFLqbmmc1PXNvA99yxmFVLEp8'
CHAT_ID = '350766421'

# Текущее время
now = datetime.datetime.now()
year = now.year
month = now.month

# Ключ для поиска
key = (year, month)

# Суммы
ark_sum = arkadiy_data.get(key, "Данные недоступны")
mar_sum = marta_data.get(key, "Данные недоступны")

# Названия месяцев на русском
month_names = {
    1: 'январь', 2: 'февраль', 3: 'март', 4: 'апрель', 5: 'май', 6: 'июнь',
    7: 'июль', 8: 'август', 9: 'сентябрь', 10: 'октябрь', 11: 'ноябрь', 12: 'декабрь'
}
current_month = month_names.get(month, str(month))

# Формируем сообщение
text = (
    f"Для Аркадия на {current_month} {year}: {ark_sum}\n\n"
    f"https://debank.com/profile/0x305220d077474c5cab839e7c1cb3264aca19f1b9\n\n"
    f"Для Марты на {current_month} {year}: {mar_sum}\n\n"
    f"https://debank.com/profile/0x10082016a94920abdf410cdb6f98c2ead2c57340"
)

# Отправка в Telegram
url = f"https://api.telegram.org/bot{BOT_TOKEN}/sendMessage"
payload = {'chat_id': CHAT_ID, 'text': text}
response = requests.post(url, data=payload)

# Проверка и вывод в консоль
if response.status_code == 200:
    print("Сообщение отправлено успешно!")
else:
    print(f"Ошибка отправки: {response.status_code} - {response.text}")

print(f"Отправлено для {current_month} {year}: Аркадий={ark_sum}, Марта={mar_sum}")
